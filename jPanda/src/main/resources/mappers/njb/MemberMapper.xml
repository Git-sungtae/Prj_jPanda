<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "//mybatis.org/DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.kakkao.jPanda.mappers.njb.MemberMapper">
	   
	<select id="findBankList" resultType="BankDto">
        SELECT code, name
        FROM bank
    </select>
    <select id="selectMemberById" parameterType="string" resultType="MemberDto">
    	SELECT * 
    	FROM member 
    	WHERE id = #{id}
  	</select>
	<select id="findIdByNameAndEmail" parameterType="Map" resultType="String">
		SELECT id
		FROM member
		WHERE name = #{name} AND email = #{email}
	</select> 
	<select id="findPwByIdAndEmail" parameterType="Map" resultType="String">
		SELECT password
		FROM member
		WHERE id = #{id} AND email = #{email}
	</select>
	<update id="updatePasswordById" parameterType="Map">
 	 	UPDATE member
 		SET password = #{newPw}
 		WHERE id = #{id}
	</update>
	<select id="selectMemberByIdAndPassword" parameterType="MemberDto" resultType="MemberDto">
		SELECT *
		FROM member
		WHERE id = #{id} AND password = #{password}
	</select>
	<insert id="insertMember" parameterType="MemberDto">
        INSERT INTO Member
            (id, password, name, tel, email, gender ,birth)
        VALUES (#{id},#{password}, #{name},#{tel}, #{email}, #{gender} , TO_DATE(#{birth}, 'YYYY-MM-DD'))
    </insert>
	<insert id="insertAccount" parameterType="MemberDto">
        INSERT INTO Account
            (id, account, code)
        VALUES (#{id},#{account}, #{code})
    </insert>
    <select id="checkId" resultType="int" parameterType="MemberDto">
    	SELECT 
    	COUNT(*) 
    	FROM member 
    	WHERE id=#{id}
	</select>
	<delete id="deleteMemberById">
  		DELETE 
  		FROM member
  		WHERE id = #{id}
    	AND password = #{encryptedPassword}
	</delete>
</mapper>