<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="js/jquery.js"></script>
<style type="text/css">
		
	.navigation-menu ul {
	  padding: 10px;
	  margin-left: 15%;
	  margin-right: 15%;
	  margin-bottom: 20px;
	  font-weight: bold;
	}
	.navigation-menu ul {   
	    padding: 0;
	    overflow: hidden;
	    background-color: #4B4B4B;
	    text-align: center;
	}
	.navigation-menu li a {
	    display: inline-block;
	    color: white;
	    text-align: center;
	    padding: 10px 20px;
	    text-decoration: none;
	}
	
	li a:hover {
	    text-decoration: underline;
	}
	
	#navigation ul
	{
		font-size: 1.2em;
	}
	#navigation ul li
	{
	    display: inline;
		color:white;
	}
	#navigation li:not(:first-child):before {
	    content: " | ";
	}
	
	
	#container {
		width: 960px;
		margin: 0 auto;
	}
	
	#container * {
	  background-color: gray;
	}
	
	
	#contents {
		border : 1px solid;
		width: 490px;
		float: left;
		margin-left: 15%;
		margin-bottom: 20px;
		
	}
	#right-sidebar {
	border : 1px solid;
		width: 150px;
		float: right;
		margin-bottom: 20px;
	}	
	/* 쿠폰중복 */	
	.id_ok{
	color:#008000;
	display: none;
	}
	
	.id_already{
	color:#6A82FB; 
	display: none;
	}
	
	
</style>

<script type="text/javascript">

//	금액 미입력시 Null Insert 처리
	function couponNoChargemoneyNull(){
		//alert("입력해 영광이형");
		if($('#chargeMoney').val() === null || $('#chargeMoney').val() === '') {	// === 는 변수 타입과 값이 똑같아야한다
		alert("금액을 입력해주세요");
		return false;
	} 
	return true;
	}
	
//	사용 가능한 쿠폰 입력 처리(중복처리 아님)
//	couponNoDupChk 라는 함수가 실행
	$(function(){
	    
	    $("#checkCoupon").click(function(){
	    
	        let couponNo = $("#couponNo").val();
	         
	        $.ajax({
	            type:'GET', //ㅎㄷㅅ 형식으로 controller 에 보내기위함!!
	            url:"/checkCoupon", // 컨트롤러로 가는 mapping 입력
	            data: {"couponNo":couponNo}, // 원하는 값을 중복확인하기위해서  JSON 형태로 DATA 전송
	            dataType: "json",
	            success: function(data){ 
	                if(data == "YES"){ // 만약 성공할시
	                    result = "사용 가능한 쿠폰입니다.";
	                    $("#result_checkCoupon").html(result).css("color", "green");
	                 
	             }else{ // 만약 실패할시
	                 result="사용이 불가능한 쿠폰입니다.";
	                     $("#result_checkCoupon").html(result).css("color","red");
	                     $("#couponNo").val("").trigger("focus");
	             }
	                 
	         },
	            error : function(error){alert(error);}
	        });
	        
	    });
	    
	});
		

</script>
				

</head>
<body>
	
	<div class="navigation-menu">
		<nav id="navigation">
		  <ul>
		    <li><a href="/sell">재능판매</a></li>
		    <li><a href="/pruchase">재능구매</a></li>
		    <li><a href="/trade">거래관리</a></li>
		    <li><a href="/charge">충전/내역</a></li>
		    <li><a href="/myPage">마이페이지</a></li>
		  </ul>
		</nav>
	</div>
	
	<div id="container">

		<div id="contents">
			<form action="/chargePage" method="post" onsubmit="return couponNoChargemoneyNull()">
				
				
				충전 금액 : <input type="text" id = "chargeMoney" name="chargeMoney" required="required"><p/>
				
				쿠폰 입력 :	<input type="text" id = "couponNo" name="couponNo"  placeholder="쿠폰입력">  
				 <input type="button" id="checkCoupon" value="중복검사"><br/>
    			 <div><span id="result_checkCoupon" style="font-size:12px;"></span></div>
				
				
				<!-- 확인버튼 -->
				<!-- 아래 submit은 추후 결제확인으로 대체예정, 테스트용 버튼 -->
				<input type="submit" value="확인">
				
				
				<!-- <input type="text"  id = "couponNoDupChk" name ="couponNoDupChk" oninput="couponNoDupChk()">
				id ajax 중복체크
				<span class="coupon_ok">사용 가능한 쿠폰입니다.</span>
				<span class="coupon_already">사용 불가능한 쿠폰입니다.</span>
				<p/> -->
		
			<table>
			  <tr th:if="${chargeFailMsg != null}">
			    <td th:text="${chargeFailMsg}"></td>
			  </tr>
			</table>
			
			</form>
			
			
			
		</div>
		<div id="right-sidebar">
			<h2>사이드바 Right</h2>
			<ul>
			    <li>항목1</li>
			    <li>항목2</li>
			    <li>항목3</li>
			    <li>항목4</li>
		    </ul>
		</div>   
	</div>
	
	
</body>
</html>